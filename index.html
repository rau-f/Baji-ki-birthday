<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Happy Birthday, Gulshan ‚Äî (24? 25? Your secret.)</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,container-queries"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;0,900;1,700&amp;family=Plus+Jakarta+Sans:wght@300;400;500;600;700&amp;family=Poppins:wght@300;400;500;600&amp;family=Dancing+Script:wght@700&amp;display=swap"
        rel="stylesheet" />

    <!-- Material Icons -->
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
        rel="stylesheet" />

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "deep-navy": "#0a1128",
                        "champagne-gold": "#d4af37", // Intro
                        "soft-blush": "#f5d0cc", // Intro
                        "muted-gold": "#b8860b", // Intro

                        "gold": "#D4AF37", // Puzzle 1, 3
                        "gold-light": "#F9E29B", // Puzzle 1
                        "background-dark": "#0B090F", // Puzzle 1
                        "card-dark": "#15121B", // Puzzle 1

                        "primary": "#D4AF37", // Puzzle 2 (Gold) / Puzzle 3 (Pink overwrite fixed below)
                        "primary-pink": "#ec4899", // Puzzle 3 specific
                        "deep-night": "#0B0B0E", // Puzzle 2
                        "gold-glow": "#FFD700", // Puzzle 2

                        "silver": "#c0c0c0", // Puzzle 3
                        "canvas-dark": "#120b18", // Puzzle 3

                        "rich-ebony": "#0D0D0D", // Final
                        "deep-black": "#050505", // Final
                    },
                    fontFamily: {
                        "display": ["Playfair Display", "serif"],
                        "serif": ["Playfair Display", "serif"],
                        "sans": ["Plus Jakarta Sans", "sans-serif"], // Default sans
                        "body": ["Poppins", "sans-serif"], // Puzzle 2 body
                        "script": ["Dancing Script", "cursive"],
                    },
                    borderRadius: {
                        DEFAULT: "1rem",
                    },
                },
            },
        }
    </script>

    <style type="text/tailwindcss">
        /* GLOBAL VARS */
        :root {
            --navy: #0a1128;
            --gold: #d4af37;
            --blush: #f5d0cc;
            
            --neon-pink: #ff2d55;
            --neon-purple: #bf5af2;
            --neon-blue: #5ac8fa;
            --neon-gold: #ffd60a;
            
            --primary-gold: #D4AF37;
            --deep-night: #0B0B0E;
            
            --gold-outline: #d4af37;
            --silver-outline: #c0c0c0;
            --glow-pink: #ec4899;
            
            --gold-light: #F9E29C;
            --gold-dark: #996515;
            --deep-black: #050505;
            --rich-ebony: #0D0D0D;
        }

        /* --- INTRO SECTION STYLES --- */
        .intro-bg {
            background-color: var(--navy);
            background-image: radial-gradient(circle at center, #1a2a4a 0%, #0a1128 100%);
        }
        .gold-gradient-text {
            background: linear-gradient(to bottom, #f9e29c 0%, #d4af37 50%, #b8860b 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .btn-gold {
            background: linear-gradient(135deg, #f9e29c 0%, #d4af37 100%);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
        }
        .btn-gold:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 0 35px rgba(212, 175, 55, 0.6);
        }
        .shimmer-particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #f9e29c;
            border-radius: 50%;
            filter: blur(1px);
            opacity: 0.6;
            animation: drift var(--duration) linear infinite;
            will-change: transform, opacity;
        }
        @keyframes drift {
            0% { transform: translateY(0) translateX(0); opacity: 0; }
            50% { opacity: 0.8; }
            100% { transform: translateY(-100vh) translateX(var(--x-drift)); opacity: 0; }
        }
        .glass-panel {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border: 1px solid rgba(212, 175, 55, 0.2);
            will-change: transform; /* Hint for compositor */
        }
        @media (max-width: 768px) {
            .glass-panel {
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                background: rgba(255, 255, 255, 0.12); /* Higher opacity for legibility */
            }
        }

        /* --- PUZZLE 1 (MEMORY MATCH) STYLES --- */
        .perspective-1000 {
            perspective: 1000px
        }
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d
        }
        /* Fix for backface visibility on some browsers */
        .card-inner > * {
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }

        .card-flipped .card-inner {
            transform: rotateY(180deg)
        }
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 1rem;
            border: 1px solid rgba(212, 175, 55, 0.2)
        }
        .card-back {
            transform: rotateY(180deg);
            background: #15121B
        }
        .filigree-pattern {
            background-color: #0d0b12;
            /* Using a subtle dark pattern if image fails, or the provided url */
            background-image: url(https://lh3.googleusercontent.com/aida-public/AB6AXuDlDeSijlPLqTldnAa3ejvLB9X-Ki4LYSUCnieTWh2q_pLnTExr7HA9a_SXsE1Qf5yzicmvwqtuCUCJJQa1E1xcps99IKZTjPL4SGKoxXPVD_2eqN5ZN9395fXPs1F9YKpTYnRNgtsRVGlyYRPEFTHvq1JSFKUDpaQX2SdS6MFAMl8PVDr2hLcstUigbPBunXHZofG_o-HQpJakzUzLBf8pAXxViqWZLona-8vbPtk6lmwz_jSG4xuv1gy6-pZGPUZnWlToay2Gkv4);
            border: 2px solid #D4AF37;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.8)
        }
        .neon-text-pink { color: var(--neon-pink); text-shadow: 0 0 5px var(--neon-pink), 0 0 15px var(--neon-pink) }
        .neon-text-purple { color: var(--neon-purple); text-shadow: 0 0 5px var(--neon-purple), 0 0 15px var(--neon-purple) }
        .neon-text-blue { color: var(--neon-blue); text-shadow: 0 0 5px var(--neon-blue), 0 0 15px var(--neon-blue) }
        .neon-text-gold { color: var(--neon-gold); text-shadow: 0 0 5px var(--neon-gold), 0 0 15px var(--neon-gold) }

        /* --- UNIFIED STARRY BACKGROUND --- */
        .star-dust-bg {
            position: fixed;
            top: -10%;
            left: -10%;
            width: 120%;
            height: 120%;
            background-color: #010103; /* Much Darker Base */
            background-image: 
                radial-gradient(circle at 50% 50%, rgba(212, 175, 55, 0.05) 0%, transparent 60%), /* Reduced Gold Glow opacity */
                radial-gradient(circle at 10% 10%, rgba(236, 72, 153, 0.05) 0%, transparent 50%), /* Reduced Pink Tint opacity */
                /* BRIGHTER STARS */
                radial-gradient(2px 2px at 25px 35px, white, transparent),
                radial-gradient(2px 2px at 50px 100px, rgba(255, 255, 255, 0.9), transparent),
                radial-gradient(2.5px 2.5px at 150px 200px, rgba(255, 215, 0, 0.8), transparent), /* Gold Star */
                radial-gradient(2px 2px at 250px 50px, white, transparent),
                radial-gradient(2px 2px at 300px 350px, rgba(255, 255, 255, 0.8), transparent),
                radial-gradient(3px 3px at 450px 150px, rgba(255, 255, 255, 0.9), transparent),
                radial-gradient(2px 2px at 600px 400px, rgba(255, 255, 255, 0.8), transparent),
                radial-gradient(2px 2px at 700px 100px, white, transparent),
                radial-gradient(2.5px 2.5px at 800px 500px, rgba(255, 215, 0, 0.7), transparent); /* Gold Star */
            background-repeat: repeat;
            background-size: 800px 800px, 800px 800px, 
                             150px 150px, 200px 200px, 300px 300px, 
                             250px 250px, 350px 350px, 450px 450px, 
                             500px 500px, 600px 600px, 700px 700px;
            animation: star-twinkle 6s ease-in-out infinite alternate;
            will-change: transform;
            z-index: -1;
            pointer-events: none;
        }

        @keyframes star-twinkle {
            0% { transform: scale(1); }
            100% { transform: scale(1.02); }
        }

        .gold-glow-text {
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.8), 0 0 20px rgba(212, 175, 55, 0.4);
        }

        .floating-tile {
            background: linear-gradient(145deg, #1A1A1D, #0F0F12);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.8), inset 0 0 1px 1px rgba(255, 255, 255, 0.05);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            will-change: transform;
        }
        .floating-tile:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px 0 rgba(212, 175, 55, 0.2), inset 0 0 1px 1px rgba(212, 175, 55, 0.3);
        }
        .letter-slot {
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* --- PUZZLE 3 (HIDDEN HEART) STYLES --- */
        .dark-illustration-icon {
            @apply absolute transition-all duration-500 opacity-40;
            -webkit-text-stroke: 1px var(--gold-outline);
            color: transparent;
        }
        .silver-stroke {
            -webkit-text-stroke: 1px var(--silver-outline);
        }
        .hidden-heart {
            @apply cursor-pointer transition-all duration-500;
            /* Outline only by default */
            color: transparent;
            -webkit-text-stroke: 1.5px var(--glow-pink);
            filter: drop-shadow(0 0 3px rgba(236, 72, 153, 0.3));
            opacity: 0.40;
        }
        .hidden-heart:hover {
            transform: scale(1.2);
            filter: drop-shadow(0 0 8px var(--glow-pink));
            opacity: 1;
        }
        /* When found/clicked, fill with color and glow */
        .hidden-heart.found {
            color: var(--glow-pink);
            -webkit-text-stroke: 0;
            filter: drop-shadow(0 0 20px var(--glow-pink)) drop-shadow(0 0 40px var(--glow-pink));
            transform: scale(1.8);
            opacity: 1;
        }
        #puzzle-canvas {
            background: radial-gradient(circle at center, #1e1126 0%, #0a050c 100%);
            border: 1px solid rgba(212, 175, 55, 0.2);
        }

        /* --- FINAL REVEAL STYLES --- */
        @keyframes float-anim {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        @keyframes gold-confetti {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 0; }
            20% { opacity: 1; }
            100% { transform: translateY(110vh) rotate(720deg); opacity: 0; }
        }
        @keyframes light-leak {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.2); }
        }
        .gold-text {
            color: #d4af37; /* Fallback */
            background: linear-gradient(to bottom, #F9E29B 0%, #D4AF37 50%, #996515 100%); /* Hardcoded colors to ensure vars arent the issue */
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            /* Removed filter */
        }
        .gold-border-glow {
            border: 2px solid var(--gold-primary);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.4), inset 0 0 15px rgba(212, 175, 55, 0.2);
        }
        .starlit-bg {
            background: radial-gradient(circle at center, #1a1a1a 0%, var(--deep-black) 100%);
        }
        .light-leak {
            position: fixed;
            width: 80vw;
            height: 80vw;
            /* Replaced blur(60px) with specific gradient for performance */
            background: radial-gradient(circle, rgba(212, 175, 55, 0.08) 0%, rgba(212, 175, 55, 0.02) 40%, transparent 70%);
            pointer-events: none;
            z-index: 1;
            animation: light-leak 15s ease-in-out infinite;
            will-change: transform, opacity;
        }
        .confetti-gold {
            position: fixed;
            width: 8px;
            height: 8px;
            background: linear-gradient(45deg, var(--gold-light), var(--gold-primary));
            z-index: 2;
            pointer-events: none;
            animation: gold-confetti 6s linear infinite;
        }
        .glass-gold-card {
            background: rgba(13, 13, 13, 0.6);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border: 1px solid rgba(212, 175, 55, 0.2);
        }
        @media (max-width: 768px) {
            .glass-gold-card {
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                background: rgba(13, 13, 13, 0.7);
            }
        }

        /* --- CANDLE ANIMATIONS --- */
        .candle-group {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            gap: 1rem;
        }
        .candle {
            position: relative;
            width: 12px;
            height: 60px;
            background: linear-gradient(to bottom, #f5e6d3, #d4af37);
            border-radius: 2px 2px 4px 4px;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        }
        .candle::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 8px;
            background: #333;
            border-radius: 2px;
        }
        .flame {
            position: absolute;
            top: -28px;
            left: 50%;
            transform: translateX(-50%);
            width: 14px;
            height: 20px;
            background: linear-gradient(to top, #ff6b35, #ffd700, #fff);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            animation: flicker 0.3s ease-in-out infinite alternate;
            box-shadow: 0 0 20px #ffd700, 0 0 40px #ff6b35, 0 0 60px rgba(255, 107, 53, 0.5);
        }
        @keyframes flicker {
            0% { transform: translateX(-50%) scale(1) rotate(-2deg); opacity: 1; }
            50% { transform: translateX(-50%) scale(1.05, 0.95) rotate(1deg); opacity: 0.9; }
            100% { transform: translateX(-50%) scale(0.95, 1.05) rotate(-1deg); opacity: 1; }
        }

        /* --- FIREWORK ANIMATIONS --- */
        .firework {
            position: fixed;
            pointer-events: none;
            z-index: 5;
        }
        .firework-particle {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            animation: firework-burst 1.5s ease-out forwards;
        }
        @keyframes firework-burst {
            0% { transform: translate(0, 0) scale(1); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; }
        }
        @keyframes firework-rise {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-200px); opacity: 0; }
        }

        /* Material Symbols Settings */
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 48;
        }
        
        /* Utils */
        .hidden-section {
            display: none !important;
        }
        .fade-in {
            animation: fadeIn 0.8s ease-in forwards;
        }
        .fade-out {
            animation: fadeOut 0.6s ease-out forwards;
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }

        /* New Vibrant Text Classes */
        .rose-gold-text {
            background: linear-gradient(to right, #F472B6, #D4AF37, #F472B6);
            background-size: 200% auto;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shine 3s linear infinite;
        }
        .lavender-gradient {
             background: linear-gradient(135deg, #E0C3FC 0%, #A9C9FF 100%);
             -webkit-background-clip: text;
             background-clip: text;
             -webkit-text-fill-color: transparent;
        }
        .pearl-text {
            color: #ffffff;
            text-shadow: 0 0 10px rgba(255, 192, 203, 0.5), 0 0 20px rgba(212, 175, 55, 0.3);
        }
        @keyframes shine {
            to {
                background-position: 200% center;
            }
        }


    </style>
</head>

<body class="text-slate-100 overflow-x-hidden relative min-h-screen transition-colors duration-500">
    <!-- Fixed Global Background (Stars) -->
    <!-- Fixed Global Background (Stars) -->
    <div class="star-dust-bg"></div>

    <!-- Audio -->
    <audio id="bg-music" loop>
        <source src="assets/happy-birthday.mp3" type="audio/mpeg">
    </audio>

    <!-- Global Music Controls (Fixed top right) -->
    <div class="fixed top-4 right-4 z-[9999] flex items-center gap-3">
        <!-- Tooltip (hidden by default, shown when autoplay blocked) -->
        <div id="music-tooltip"
            class="opacity-0 bg-black/80 text-champagne-gold text-xs px-3 py-2 rounded-full whitespace-nowrap animate-pulse border border-champagne-gold/30 transition-opacity duration-500 pointer-events-none">
            Click to unmute üîä
        </div>
        <button id="music-toggle"
            class="w-12 h-12 rounded-full glass-panel flex items-center justify-center text-champagne-gold hover:bg-white/10 transition-colors">
            <span class="material-symbols-outlined">music_off</span>
        </button>
    </div>

    <!-- INTRO SECTION -->
    <section id="section-intro"
        class="min-h-screen flex flex-col items-center justify-center p-6 md:p-12 relative overflow-hidden text-center fade-in">
        <!-- Floating Particles -->
        <div class="hidden md:block fixed inset-0 pointer-events-none overflow-hidden z-0">
            <div class="shimmer-particle" style="top: 90%; left: 10%; --duration: 15s; --x-drift: 50px;"></div>
            <div class="shimmer-particle" style="top: 80%; left: 30%; --duration: 12s; --x-drift: -30px;"></div>
            <div class="shimmer-particle" style="top: 95%; left: 50%; --duration: 18s; --x-drift: 20px;"></div>
            <div class="shimmer-particle" style="top: 85%; left: 70%; --duration: 14s; --x-drift: -60px;"></div>
            <div class="shimmer-particle" style="top: 75%; left: 90%; --duration: 16s; --x-drift: 40px;"></div>
        </div>

        <div class="max-w-4xl w-full text-center space-y-12 z-10">
            <div class="space-y-4">
                <div class="flex items-center justify-center gap-4 text-soft-blush mb-2 opacity-80">
                    <span class="h-px w-12 bg-champagne-gold/40"></span>
                    <span class="text-xs font-bold tracking-[0.4em] uppercase">Part 1: The Invitation</span>
                    <span class="h-px w-12 bg-champagne-gold/40"></span>
                </div>
                <h1 class="text-4xl md:text-8xl font-black font-serif leading-tight">
                    <span class="block text-slate-200">Happy 24th Birthday</span>
                    <span class="block gold-gradient-text mt-2 italic">Gulshan!</span>
                </h1>
            </div>

            <div class="space-y-8 glass-panel p-10 md:p-14 rounded-[2.5rem] relative overflow-hidden group">
                <div class="absolute -top-10 -right-10 p-6 opacity-5 group-hover:opacity-10 transition-opacity">
                    <span
                        class="material-symbols-outlined text-[8rem] md:text-[12rem] text-champagne-gold">celebration</span>
                </div>
                <p class="text-lg md:text-2xl leading-relaxed text-slate-200 font-medium max-w-2xl mx-auto">
                    Far away in miles, right here with the sarcasm and good wishes. Miss you ‚Äî and your minnie mouse
                    wala cake.
                </p>
                <p class="text-base md:text-xl leading-relaxed text-slate-400 max-w-2xl mx-auto">
                    I made you a tiny quest because a plain ‚Äúhappy bday‚Äù is boring. Complete a few mini-stunts and we‚Äôll
                    get to the good stuff. Ready, or are you going to pretend you‚Äôre hungry?
                </p>
                <div
                    class="absolute bottom-0 left-1/2 -translate-x-1/2 w-1/2 h-px bg-gradient-to-r from-transparent via-champagne-gold/30 to-transparent">
                </div>
            </div>

            <div>
                <button onclick="transitionTo('section-puzzle1')"
                    class="btn-gold px-8 py-4 md:px-12 md:py-6 rounded-full text-deep-navy text-lg md:text-2xl font-bold flex items-center gap-3 md:gap-4 mx-auto group">
                    <span>Let the Show Begin!</span>
                    <span
                        class="material-symbols-outlined text-2xl md:text-3xl group-hover:rotate-12 transition-transform">redeem</span>
                </button>
                <p class="mt-8 mb-16 text-xs text-soft-blush/40 font-semibold uppercase tracking-[0.3em]">Phase 1 of 3:
                    Baby
                    steps to the cake</p>
            </div>
        </div>

        <footer class="absolute bottom-8 left-0 w-full text-center">
            <div class="flex items-center justify-center gap-3 text-champagne-gold/40">
                <span class="material-symbols-outlined text-sm">auto_awesome</span>
                <p class="text-xs font-medium tracking-widest uppercase">Crafted by your lazy brother</p>
                <span class="material-symbols-outlined text-sm">auto_awesome</span>
            </div>
        </footer>
    </section>

    <!-- SECTION 2: PUZZLE 1 (Memory Match) -->
    <section id="section-puzzle1"
        class="min-h-screen hidden-section flex flex-col items-center p-4 font-body transition-all duration-700">
        <!-- Background Orbs -->
        <!-- Background Orbs (Optimized: Gradients instead of Blur Filters) -->
        <div class="fixed inset-0 pointer-events-none z-0">
            <div class="absolute top-[-10%] left-[-10%] w-[50%] h-[50%]"
                style="background: radial-gradient(circle, rgba(88, 28, 135, 0.4) 0%, transparent 70%);"></div>
            <div class="absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%]"
                style="background: radial-gradient(circle, rgba(212, 175, 55, 0.15) 0%, transparent 70%);"></div>
        </div>

        <header class="w-full max-w-4xl mb-8 flex justify-between items-center relative z-10 pt-4">
            <div class="flex flex-col">
                <h1 class="font-display text-2xl md:text-4xl text-gold-light tracking-wide">Puzzle I</h1>
                <p class="text-gold/60 font-medium tracking-[0.2em] uppercase text-[10px] md:text-xs mt-1">Match the
                    icons. No cheating, I see you.</p>
            </div>
            <!-- Progress Indicator -->
            <div class="text-gold/60 text-sm">1/3</div>
        </header>

        <main class="w-full max-w-2xl flex flex-col items-center relative z-10">
            <!-- Stats -->
            <div
                class="w-full flex justify-between px-6 py-4 bg-card-dark/50 border border-gold/10 rounded-2xl mb-8 text-gold-light font-bold uppercase tracking-widest text-xs">
                <div class="flex items-center gap-3">
                    <span class="material-symbols-outlined text-gold">timer</span>
                    <span id="p1-timer">00:00</span>
                </div>
                <div class="flex items-center gap-3">
                    <span class="material-symbols-outlined text-gold">ifl</span>
                    <span id="p1-moves">Moves: 0</span>
                </div>
            </div>

            <!-- Game Board -->
            <div class="grid grid-cols-3 md:grid-cols-4 gap-4 md:gap-6 w-full" id="game-board">
                <!-- Cards injected via JS -->
            </div>

            <!-- Success Modal (Initially Hidden) -->
            <div class="fixed inset-0 bg-black/90 backdrop-blur-md flex items-center justify-center z-50 hidden opacity-0 transition-all duration-500"
                id="p1-modal">
                <div
                    class="bg-card-dark border-2 border-gold/30 p-8 md:p-16 rounded-[2.5rem] shadow-[0_0_50px_rgba(212,175,55,0.1)] max-w-md w-full text-center relative overflow-hidden transform scale-95 transition-transform">
                    <div
                        class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-gold to-transparent">
                    </div>
                    <div
                        class="w-24 h-24 bg-gold/10 border border-gold/30 text-gold rounded-full flex items-center justify-center mx-auto mb-8">
                        <span class="material-symbols-outlined text-5xl">auto_awesome</span>
                    </div>
                    <h2 class="font-display text-4xl text-gold-light mb-4">Piece of cake ‚Äî you smashed it!</h2>
                    <p class="text-gray-400 mb-10 leading-relaxed">Nice memory. Either you practiced or you‚Äôre secretly
                        a superhero. First secret unlocked.</p>
                    <button onclick="transitionTo('section-puzzle2')"
                        class="w-full py-5 bg-gold text-background-dark font-black uppercase tracking-widest rounded-xl shadow-[0_10px_20px_rgba(212,175,55,0.2)] hover:bg-gold-light hover:shadow-gold/40 transition-all flex items-center justify-center gap-3 group">
                        Proceed
                        <span
                            class="material-symbols-outlined group-hover:translate-x-2 transition-transform">arrow_forward</span>
                    </button>
                </div>
            </div>
        </main>
    </section>

    <!-- SECTION 3: PUZZLE 2 (Unscramble) -->
    <section id="section-puzzle2"
        class="min-h-screen hidden-section flex flex-col items-center justify-center p-4 font-body relative overflow-hidden">
        <div
            class="max-w-3xl w-full bg-black/60 backdrop-blur-xl rounded-3xl p-8 md:p-12 shadow-[0_0_50px_rgba(0,0,0,0.5)] border border-white/5 relative z-10">
            <!-- Glows (Optimized) -->
            <div class="absolute -top-32 -right-32 w-80 h-80 pointer-events-none"
                style="background: radial-gradient(circle, rgba(212, 175, 55, 0.1) 0%, transparent 70%);"></div>
            <div class="absolute -bottom-32 -left-32 w-80 h-80 pointer-events-none"
                style="background: radial-gradient(circle, rgba(88, 28, 135, 0.15) 0%, transparent 70%);"></div>

            <div class="text-center mb-8 md:mb-12">
                <h2 class="text-xs md:text-sm font-medium text-primary tracking-[0.3em] uppercase mb-3 opacity-80">
                    Puzzle 2 of 3</h2>
                <h1 class="font-display text-3xl md:text-5xl text-white mb-4 tracking-tight">Unscramble the Wish</h1>
                <p class="text-sm md:text-base text-zinc-400 max-w-md mx-auto leading-relaxed">
                    Rearrange the shimmering golden letters to reveal a special truth. Drag or click to place them.
                </p>
            </div>

            <!-- Target Slots -->
            <div class="flex flex-wrap justify-center gap-2 md:gap-3 mb-16" id="target-container">
                <!-- Injected via JS -->
            </div>

            <!-- Source Letters -->
            <div class="flex flex-wrap justify-center gap-4 mb-12" id="source-container">
                <!-- Injected via JS -->
            </div>

            <!-- Success Message -->
            <div class="hidden text-center mb-8" id="p2-success-msg">
                <p class="text-primary font-semibold text-lg flex items-center justify-center gap-2 gold-glow-text">
                    <span class="material-symbols-outlined">auto_awesome</span> You are Amazing! Of course you are.
                    Shocking, I know.
                </p>
            </div>

            <!-- Unlock Button -->
            <div class="flex flex-col items-center gap-6">
                <button id="p2-unlock-btn" disabled onclick="transitionTo('section-puzzle3')"
                    class="group relative px-10 py-4 bg-zinc-900 text-primary font-medium rounded-full shadow-[0_0_20px_rgba(212,175,55,0.1)] border border-primary/30 hover:border-primary hover:shadow-[0_0_30px_rgba(212,175,55,0.3)] transition-all hover:scale-105 active:scale-95 flex items-center gap-3 disabled:opacity-30 disabled:cursor-not-allowed">
                    <span class="tracking-wide">Unlock Final Puzzle</span>
                    <span
                        class="material-symbols-outlined group-hover:translate-x-1 transition-transform">arrow_forward</span>
                </button>
                <p class="text-zinc-600 text-[10px] uppercase tracking-[0.4em]">Celebrating 24 radiant years</p>
            </div>
        </div>

        <!-- Floating Symbols bg -->
        <div class="fixed pointer-events-none inset-0 overflow-hidden">
            <div class="absolute top-[15%] left-[10%] text-primary/10 animate-pulse"><span
                    class="material-symbols-outlined text-5xl">auto_fix_high</span></div>
            <div class="absolute bottom-[20%] right-[12%] text-white/5 animate-bounce"><span
                    class="material-symbols-outlined text-4xl">favorite</span></div>
        </div>
    </section>

    <!-- SECTION 4: PUZZLE 3 (Hidden Heart) -->
    <section id="section-puzzle3" class="min-h-screen hidden-section font-sans overflow-x-hidden relative">
        <header class="p-6 flex justify-between items-center max-w-7xl mx-auto">
            <div class="flex items-center space-x-3">
                <span class="material-symbols-outlined text-gold text-4xl">star</span>
                <h1
                    class="font-display text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-gold via-pink-500 to-gold">
                    Puzzle 3: The Hidden Heart</h1>
            </div>
        </header>

        <main class="max-w-7xl mx-auto px-6 py-4 flex flex-col items-center">
            <div class="text-center mb-10 max-w-2xl">
                <h2 class="text-3xl md:text-5xl font-display text-white mb-6">One more tiny secret (promise)</h2>
                <p class="text-base md:text-lg text-pink-100/80 leading-relaxed font-light">
                    Gulshan, you've conquered every challenge. The gateway to your 24th birthday card lies hidden in
                    this midnight celebration.
                    Search for the <span class="text-primary-pink font-semibold">Glow of the Heart</span> amidst the
                    gold and silver outlines.
                </p>
            </div>

            <!-- Canvas Container -->
            <div class="w-full h-[600px] md:h-[650px] rounded-3xl shadow-[0_0_50px_rgba(0,0,0,0.5)] relative cursor-crosshair overflow-hidden group border border-gold/20"
                id="puzzle-canvas" style="background: radial-gradient(circle at center, #1e1126 0%, #0a050c 100%);">
                <!-- Icons injected via JS -->

                <!-- Success Overlay -->
                <div class="absolute inset-0 bg-background-dark/98 flex flex-col items-center justify-center z-[100] opacity-0 pointer-events-none transition-all duration-700 transform scale-105"
                    id="p3-success-overlay">
                    <div
                        class="text-center p-8 md:p-12 border border-gold/20 rounded-[3rem] bg-white/5 backdrop-blur-sm max-w-xl">
                        <span
                            class="material-symbols-outlined text-7xl md:text-9xl text-gold mb-6 md:mb-8 block">auto_awesome</span>
                        <h2 class="text-3xl md:text-5xl font-display text-white mb-6">You found it. Predictable. Proud.
                        </h2>
                        <a onclick="transitionTo('section-reveal')"
                            class="relative inline-flex items-center space-x-3 md:space-x-4 px-8 py-4 md:px-12 md:py-5 bg-gradient-to-r from-gold to-primary-pink text-white rounded-full font-bold text-lg md:text-xl shadow-[0_0_30px_rgba(236,72,153,0.3)] hover:shadow-[0_0_50px_rgba(236,72,153,0.5)] hover:scale-105 transition-all cursor-pointer">
                            <span>Ready to be emotional</span>
                            <span class="material-symbols-outlined">arrow_forward</span>
                        </a>
                    </div>
                </div>
            </div>

            <div
                class="mt-12 text-center text-gold/50 flex items-center space-x-4 bg-white/5 px-8 py-3 rounded-full border border-white/10">
                <span class="material-symbols-outlined text-xl">lightbulb</span>
                <p class="text-sm uppercase tracking-[0.2em] font-medium">Hint: A pulsing pink glow amongst the gold
                    shadows</p>
            </div>
        </main>
    </section>

    <!-- SECTION 5: FINAL REVEAL -->
    <section id="section-reveal" class="min-h-screen hidden-section text-gray-200 font-sans relative overflow-x-hidden">
        <div class="light-leak -top-20 -left-20"></div>
        <div class="light-leak -bottom-20 -right-20" style="animation-delay: -5s;"></div>

        <!-- Confetti Container -->
        <div id="reveal-confetti" class="fixed inset-0 pointer-events-none z-0 overflow-hidden"></div>

        <!-- Fireworks Container -->
        <div id="fireworks-container" class="fixed inset-0 pointer-events-none z-[2] overflow-hidden"></div>

        <!-- Candles -->
        <div class="fixed bottom-8 left-1/2 -translate-x-1/2 z-[3] candle-group">
            <div class="candle" style="height: 50px;">
                <div class="flame"></div>
            </div>
            <div class="candle" style="height: 65px;">
                <div class="flame" style="animation-delay: 0.1s;"></div>
            </div>
            <div class="candle" style="height: 55px;">
                <div class="flame" style="animation-delay: 0.2s;"></div>
            </div>
            <div class="candle" style="height: 70px;">
                <div class="flame" style="animation-delay: 0.15s;"></div>
            </div>
            <div class="candle" style="height: 45px;">
                <div class="flame" style="animation-delay: 0.25s;"></div>
            </div>
        </div>

        <main class="relative z-10 max-w-5xl mx-auto px-6 py-12 lg:py-24">
            <header class="text-center mb-12 md:mb-20">
                <div class="flex justify-center mb-6">
                    <span
                        class="px-6 py-1.5 rounded-full border border-[var(--gold-primary)] text-[var(--gold-primary)] text-[10px] md:text-xs font-bold tracking-[0.3em] uppercase bg-[var(--gold-primary)]/5">
                        Final Reveal ‚Äî curtains up
                    </span>
                </div>
                <h1 class="text-5xl md:text-9xl font-display gold-text mb-4 leading-none">Happy Birthday</h1>
                <h2 class="text-4xl md:text-8xl font-script gold-text opacity-90 italic">Gulshan</h2>
                <div class="mt-10 flex justify-center items-center gap-4">
                    <div class="h-[1px] w-12 bg-[var(--gold-primary)] opacity-40"></div>
                    <span
                        class="text-[var(--gold-primary)] font-display text-base md:text-xl tracking-widest text-center">24
                        years (give or take) of causing delight</span>
                    <div class="h-[1px] w-12 bg-[var(--gold-primary)] opacity-40"></div>
                </div>
            </header>

            <div class="relative group mb-24">
                <div
                    class="absolute -inset-4 bg-[var(--gold-primary)] opacity-10 rounded-3xl blur-3xl group-hover:opacity-20 transition duration-1000">
                </div>
                <!-- Card Container -->
                <div
                    class="relative glass-gold-card rounded-2xl overflow-hidden shadow-2xl border-2 border-[var(--gold-primary)]/30">
                    <div class="grid md:grid-cols-2">
                        <!-- Image Side -->
                        <div class="h-96 md:h-[600px] relative p-4">
                            <div class="w-full h-full gold-border-glow rounded-xl overflow-hidden relative">
                                <img alt="looking goofy and happy"
                                    class="w-full h-full object-cover grayscale-[30%] hover:grayscale-0 transition-all duration-700"
                                    src="assets/image.png" />
                                <div
                                    class="absolute inset-0 bg-gradient-to-t from-[var(--deep-black)] via-transparent to-transparent flex items-end p-8">
                                    <p class="gold-text font-script text-4xl">No escape, you‚Äôre my sister...</p>
                                </div>
                            </div>
                        </div>
                        <!-- Completed Message Side -->
                        <div class="p-8 md:p-16 flex flex-col justify-center">
                            <span
                                class="material-symbols-outlined text-6xl text-[var(--gold-primary)] mb-8">auto_awesome</span>
                            <h3 class="text-4xl font-display gold-text mb-6">You Solved It!</h3>
                            <p class="text-lg text-gray-300 leading-relaxed mb-8 font-light">
                                Each puzzle = one memory. Apparently you survive my sibling antics and actually turn out
                                awesome. Proud of you.
                            </p>
                            <div class="space-y-4">
                                <div
                                    class="flex items-center gap-4 text-sm tracking-widest text-[var(--gold-primary)] uppercase font-semibold">
                                    <span class="material-symbols-outlined text-lg">favorite</span> Stubborn Strength
                                </div>
                                <div
                                    class="flex items-center gap-4 text-sm tracking-widest text-[var(--gold-primary)] uppercase font-semibold">
                                    <span class="material-symbols-outlined text-lg">celebration</span> Laughs that hurt
                                    your stomach
                                </div>
                                <div
                                    class="flex items-center gap-4 text-sm tracking-widest text-[var(--gold-primary)] uppercase font-semibold">
                                    <span class="material-symbols-outlined text-lg">star</span> Moments we still laugh
                                    about
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Letter Section -->
            <section class="glass-gold-card rounded-[3rem] p-10 md:p-20 mb-24 shadow-2xl relative overflow-hidden">
                <div
                    class="absolute inset-0 opacity-[0.03] pointer-events-none bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]">
                </div>
                <div class="max-w-3xl mx-auto space-y-10 relative z-10">
                    <p
                        class="text-2xl md:text-3xl leading-relaxed font-display italic text-center md:text-left border-l-4 border-[var(--gold-primary)] pl-8 rose-gold-text font-bold">
                        "Seeing you become quietly fierce and smart over the years has been a privilege. I‚Äôve watched
                        you learn, grow, and prove yourself in your own way, and I can‚Äôt help but feel proud."
                    </p>
                    <div class="space-y-6 text-lg leading-relaxed font-light pearl-text">
                        <p>Gulshan, I can‚Äôt steal your cake today, but don‚Äôt think you‚Äôre safe. I‚Äôm saving that move for
                            the next time we meet.</p>
                        <p>This little interactive nonsense is my way of showing up from far away ‚Äî cheering, teasing,
                            and occasionally stealing credit for your achievements.</p>
                        <p>May this year give you the weird good luck, fewer annoying people, and more of the things you
                            actually want. Also cake. Lots of cake.</p>
                    </div>
                    <div class="pt-12 text-center md:text-right">
                        <p class="font-script text-5xl lavender-gradient">With way too much pride (and sarcasm),</p>
                        <p class="text-2xl font-display text-[var(--gold-primary)] mt-3 tracking-widest uppercase">Your
                            younger brother ‚Äî Rauf</p>
                    </div>
                </div>

            </section>

            <footer class="text-center pb-24">
                <div class="inline-flex flex-col items-center">
                    <p class="text-[var(--gold-primary)] opacity-60 mb-8 tracking-[0.2em] uppercase text-xs">Capture
                        this golden moment</p>
                    <div class="flex flex-wrap justify-center gap-6">
                        <button onclick="shareJoy()"
                            class="bg-gold hover:bg-gold-light text-[var(--deep-black)] px-10 py-5 rounded-full font-bold shadow-[0_0_25px_rgba(212,175,55,0.4)] flex items-center gap-3 transition-all hover:scale-105 active:scale-95 uppercase tracking-widest text-sm">
                            <span class="material-symbols-outlined">share</span> Share the Joy
                        </button>
                        <button onclick="window.print()"
                            class="bg-transparent border-2 border-[var(--gold-primary)]/40 text-[var(--gold-primary)] px-10 py-5 rounded-full font-bold flex items-center gap-3 transition-all hover:bg-[var(--gold-primary)]/10 uppercase tracking-widest text-sm">
                            <span class="material-symbols-outlined">download</span> Save Memory
                        </button>
                    </div>
                </div>
            </footer>
        </main>
    </section>

    <!-- SCRIPTS -->
    <script>
        // GLOBAL STATE
        let currentSection = 'section-intro';
        const audio = document.getElementById('bg-music');
        const musicBtn = document.getElementById('music-toggle');
        let isPlaying = false;

        // Try Autoplay on Load (unmuted)
        window.addEventListener('load', () => {
            audio.volume = 0.5;
            audio.play().then(() => {
                isPlaying = true;
                updateMusicIcon();
            }).catch(error => {
                console.log("Autoplay blocked by browser. Music will start on first interaction.");
                // Show the tooltip with fade in
                document.getElementById('music-tooltip').classList.remove('opacity-0');
                document.getElementById('music-tooltip').classList.add('opacity-100');
            });
        });

        // Helper to hide tooltip properly
        function hideTooltip() {
            const tooltip = document.getElementById('music-tooltip');
            tooltip.classList.remove('animate-pulse', 'opacity-100');
            tooltip.classList.add('opacity-0');
        }

        // Play on first interaction if autoplay was blocked
        document.addEventListener('click', function enableAudio() {
            hideTooltip();

            if (audio.paused) {
                audio.volume = 0.5;
                audio.play().then(() => {
                    isPlaying = true;
                    updateMusicIcon();
                });
            }
        }, { once: true });

        // --- MUSIC CONTROL ---
        function updateMusicIcon() {
            if (isPlaying) {
                musicBtn.querySelector('span').innerText = 'music_note';
                musicBtn.classList.add('bg-white/10');
            } else {
                musicBtn.querySelector('span').innerText = 'music_off';
                musicBtn.classList.remove('bg-white/10');
            }
        }

        musicBtn.addEventListener('click', (e) => {
            e.stopPropagation(); // Don't trigger the document listener
            if (isPlaying) {
                audio.pause();
                isPlaying = false;
            } else {
                audio.muted = false;
                audio.play();
                isPlaying = true;
                hideTooltip();
            }
            updateMusicIcon();
        });

        // --- TRANSITION LOGIC ---
        function transitionTo(nextSectionId) {
            const current = document.getElementById(currentSection);
            const next = document.getElementById(nextSectionId);

            // Fade out current
            current.classList.add('fade-out');

            setTimeout(() => {
                current.classList.add('hidden-section');
                current.classList.remove('fade-out');

                // Show next
                next.classList.remove('hidden-section');
                next.classList.add('fade-in');

                // Init next puzzle
                if (nextSectionId === 'section-puzzle1') initPuzzle1();
                if (nextSectionId === 'section-puzzle2') initPuzzle2();
                if (nextSectionId === 'section-puzzle3') initPuzzle3();
                if (nextSectionId === 'section-reveal') initReveal();

                // Clean animation class after play
                setTimeout(() => next.classList.remove('fade-in'), 800);

                currentSection = nextSectionId;
                window.scrollTo(0, 0);
            }, 600);
        }

        // --- PUZZLE 1: MEMORY MATCH ---
        const p1Icons = [
            { name: 'cake', color: 'neon-text-pink' },
            { name: 'celebration', color: 'neon-text-purple' },
            { name: 'redeem', color: 'neon-text-blue' },
            { name: 'auto_awesome', color: 'neon-text-gold' },
            { name: 'diamond', color: 'neon-text-pink' },
            { name: 'star', color: 'neon-text-blue' }
        ];
        let p1Flipped = [];
        let p1Matched = 0;
        let p1Moves = 0;
        let p1TimerInt;
        let p1Seconds = 0;

        function initPuzzle1() {
            const board = document.getElementById('game-board');
            board.innerHTML = '';
            // Double and shuffle
            const cards = [...p1Icons, ...p1Icons].sort(() => Math.random() - 0.5);

            cards.forEach(item => {
                const card = document.createElement('div');
                card.className = 'perspective-1000 h-32 md:h-44 cursor-pointer group';
                card.dataset.icon = item.name;
                card.innerHTML = `
                    <div class="card-inner shadow-2xl">
                        <div class="card-front filigree-pattern relative">
                            <div class="absolute inset-2 border border-gold/10 pointer-events-none"></div>
                            <span class="material-symbols-outlined text-gold/20 text-4xl">fingerprint</span>
                        </div>
                        <div class="card-back">
                            <span class="material-symbols-outlined text-6xl ${item.color}">${item.name}</span>
                        </div>
                    </div>
                `;
                card.addEventListener('click', () => flipCard(card));
                board.appendChild(card);
            });
            startP1Timer();
        }

        function startP1Timer() {
            if (p1TimerInt) return;
            p1TimerInt = setInterval(() => {
                p1Seconds++;
                const m = Math.floor(p1Seconds / 60).toString().padStart(2, '0');
                const s = (p1Seconds % 60).toString().padStart(2, '0');
                document.getElementById('p1-timer').textContent = `${m}:${s}`;
            }, 1000);
        }

        function flipCard(card) {
            if (p1Flipped.length < 2 && !card.classList.contains('card-flipped') && !card.classList.contains('matched')) {
                card.classList.add('card-flipped');
                p1Flipped.push(card);

                if (p1Flipped.length === 2) {
                    p1Moves++;
                    document.getElementById('p1-moves').textContent = `Moves: ${p1Moves}`;
                    checkP1Match();
                }
            }
        }

        function checkP1Match() {
            const [c1, c2] = p1Flipped;
            if (c1.dataset.icon === c2.dataset.icon) {
                c1.classList.add('matched');
                c2.classList.add('matched');
                setTimeout(() => {
                    c1.querySelector('.card-back').style.boxShadow = '0 0 30px rgba(212, 175, 55, 0.3)';
                    c2.querySelector('.card-back').style.boxShadow = '0 0 30px rgba(212, 175, 55, 0.3)';
                }, 200);
                p1Matched++;
                p1Flipped = [];
                if (p1Matched === p1Icons.length) {
                    clearInterval(p1TimerInt);
                    setTimeout(() => {
                        const modal = document.getElementById('p1-modal');
                        modal.classList.remove('hidden');
                        setTimeout(() => {
                            modal.classList.remove('opacity-0');
                            modal.querySelector('div').classList.remove('scale-95');
                        }, 50);
                    }, 800);
                }
            } else {
                setTimeout(() => {
                    c1.classList.remove('card-flipped');
                    c2.classList.remove('card-flipped');
                    p1Flipped = [];
                }, 1000);
            }
        }

        // --- PUZZLE 2: UNSCRAMBLE ---
        const TARGET_WORD = ["A", "M", "A", "Z", "I", "N", "G"];
        const SCRAMBLED = ["N", "A", "Z", "A", "G", "M", "I"].sort(() => Math.random() - 0.5);

        function initPuzzle2() {
            const tContainer = document.getElementById('target-container');
            const sContainer = document.getElementById('source-container');
            tContainer.innerHTML = '';
            sContainer.innerHTML = '';

            // Create Slots
            TARGET_WORD.forEach(() => {
                const slot = document.createElement('div');
                slot.className = 'letter-slot w-12 h-16 md:w-16 md:h-20 border-b-2 border-primary/20 flex items-center justify-center text-3xl font-bold text-primary bg-zinc-900/40 rounded-t-xl';
                slot.dataset.filled = "false";
                tContainer.appendChild(slot);
            });

            // Create Source Letters
            SCRAMBLED.forEach(char => {
                const btn = document.createElement('button');
                btn.className = 'floating-tile w-14 h-14 text-white text-2xl font-bold rounded-xl cursor-pointer flex items-center justify-center border border-white/5 gold-glow-text hover:gold-glow-text';
                btn.innerText = char;
                btn.draggable = true;

                // Drag Events
                btn.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text', char);
                    btn.classList.add('opacity-50');
                });
                btn.addEventListener('dragend', () => btn.classList.remove('opacity-50'));

                // Click Event
                btn.addEventListener('click', () => fillSlot(char, btn));

                sContainer.appendChild(btn);
            });
        }

        function fillSlot(char, sourceBtn) {
            const slots = document.querySelectorAll('.letter-slot');
            const emptySlot = Array.from(slots).find(s => s.dataset.filled === "false");

            if (emptySlot) {
                emptySlot.innerText = char;
                emptySlot.dataset.filled = "true";
                emptySlot.classList.add('gold-glow-text', 'bg-zinc-800/60');

                // Hide source
                sourceBtn.style.opacity = '0';
                sourceBtn.style.pointerEvents = 'none';

                checkP2Completion();
            }
        }

        function checkP2Completion() {
            const slots = document.querySelectorAll('.letter-slot');
            const allFilled = Array.from(slots).every(s => s.dataset.filled === "true");

            if (allFilled) {
                const currentWord = Array.from(slots).map(s => s.innerText).join('');
                if (currentWord === "AMAZING") {
                    document.getElementById('p2-success-msg').classList.remove('hidden');
                    document.getElementById('p2-unlock-btn').disabled = false;
                    slots.forEach(s => s.classList.add('border-primary', 'shadow-[0_0_15px_rgba(212,175,55,0.4)]'));
                } else {
                    // Reset on wrong
                    setTimeout(() => {
                        slots.forEach(s => {
                            s.innerText = '';
                            s.dataset.filled = "false";
                            s.classList.remove('gold-glow-text', 'bg-zinc-800/60');
                        });
                        const sourceBtns = document.querySelectorAll('.floating-tile');
                        sourceBtns.forEach(b => {
                            b.style.opacity = '1';
                            b.style.pointerEvents = 'auto';
                        });
                    }, 800);
                }
            }
        }

        // --- PUZZLE 3: HIDDEN HEART ---
        const P3_ICONS = ['celebration', 'liquor', 'cake', 'auto_awesome', 'redeem', 'confirmation_number', 'nightlife', 'brightness_7', 'featured_seasonal_and_gifts', 'local_bar'];

        function initPuzzle3() {
            const canvas = document.getElementById('puzzle-canvas');
            // Clear previous except success overlay
            const overlay = document.getElementById('p3-success-overlay');
            canvas.querySelectorAll('.dark-illustration-icon, .puzzle-decor').forEach(el => el.remove());

            // Randomly scatter MORE decoy icons (40 for difficulty)
            for (let i = 0; i < 40; i++) {
                const icon = document.createElement('span');
                icon.className = `material-symbols-outlined dark-illustration-icon text-${Math.floor(Math.random() * 4 + 5)}xl`;
                if (Math.random() > 0.5) icon.classList.add('silver-stroke');
                icon.innerText = P3_ICONS[Math.floor(Math.random() * P3_ICONS.length)];

                // Random Pos
                icon.style.left = Math.random() * 85 + 5 + '%';
                icon.style.top = Math.random() * 85 + 5 + '%';
                icon.style.transform = `rotate(${(Math.random() - 0.5) * 45}deg)`;

                canvas.appendChild(icon);
            }

            // Create Heart (Target)
            const target = document.createElement('div');
            target.className = 'absolute p-4 z-50 group/target puzzle-decor';
            target.innerHTML = `
                <span class="material-symbols-outlined text-3xl hidden-heart">favorite</span>
                <div class="absolute inset-0 bg-pink-500/20 rounded-full blur-xl opacity-0 group-hover/target:opacity-100 transition-opacity"></div>
            `;
            // Random pos for heart too (ensure it's clickable)
            target.style.left = Math.random() * 70 + 15 + '%';
            target.style.top = Math.random() * 70 + 15 + '%';
            target.addEventListener('click', () => {
                const heartEl = target.querySelector('span');
                // Show the "found" state with fill and glow, stay in place
                heartEl.classList.add('found');

                // Wait a moment to appreciate the glowing heart, then show success
                setTimeout(() => {
                    const ov = document.getElementById('p3-success-overlay');
                    ov.classList.remove('opacity-0', 'pointer-events-none', 'scale-105');
                    ov.classList.add('opacity-100', 'scale-100');
                    createP3Confetti();
                }, 800);
            });
            canvas.appendChild(target);
        }

        function createP3Confetti() {
            // Simple visual effect
            const overlay = document.getElementById('p3-success-overlay');
            const colors = ['#d4af37', '#ec4899', '#ffffff', '#c0c0c0'];
            for (let i = 0; i < 50; i++) {
                const c = document.createElement('div');
                c.style.cssText = `position:absolute; width:6px; height:6px; background:${colors[Math.floor(Math.random() * 4)]}; top:50%; left:50%;`;
                overlay.appendChild(c);
                c.animate([
                    { transform: 'translate(0,0)' },
                    { transform: `translate(${(Math.random() - 0.5) * 500}px, ${(Math.random() - 0.5) * 500}px)`, opacity: 0 }
                ], { duration: 1500, easing: 'ease-out' }).onfinish = () => c.remove();
            }
        }

        // --- REVEAL SECTION ---
        function initReveal() {
            const container = document.getElementById('reveal-confetti');
            for (let i = 0; i < 15; i++) {
                const c = document.createElement('div');
                c.className = 'confetti-gold';
                c.style.left = Math.random() * 100 + '%';
                c.style.animationDelay = Math.random() * 5 + 's';
                c.style.animationDuration = (Math.random() * 4 + 4) + 's';
                container.appendChild(c);
            }

            // Launch fireworks periodically - more intense!
            launchFirework();
            launchFirework(); // Launch 2 at start
            setInterval(launchFirework, 800); // Faster launches

            // Auto play music if not already
            if (!isPlaying && audio.paused) {
                audio.play().then(() => {
                    isPlaying = true;
                    musicBtn.querySelector('span').innerText = 'music_note';
                    musicBtn.classList.add('bg-white/10');
                }).catch(e => console.log('Autoplay prevented', e));
            }
        }

        function launchFirework() {
            const container = document.getElementById('fireworks-container');
            const firework = document.createElement('div');
            firework.className = 'firework';

            // Random position - spread across more of the screen
            const x = Math.random() * 90 + 5; // 5-95% of screen width
            const y = Math.random() * 50 + 5; // 5-55% of screen height
            firework.style.left = x + '%';
            firework.style.top = y + '%';

            // More vibrant firework colors
            const colorSets = [
                ['#d4af37', '#ffd700', '#f9e29b'], // Gold
                ['#ec4899', '#ff6b9d', '#f472b6'], // Pink
                ['#60a5fa', '#3b82f6', '#93c5fd'], // Blue
                ['#a78bfa', '#8b5cf6', '#c4b5fd'], // Purple
                ['#34d399', '#10b981', '#6ee7b7'], // Emerald
                ['#f97316', '#fb923c', '#fdba74'], // Orange
                ['#22d3ee', '#06b6d4', '#67e8f9'], // Cyan
                ['#ffffff', '#f1f5f9', '#e2e8f0'], // White
            ];
            const colorSet = colorSets[Math.floor(Math.random() * colorSets.length)];

            // Create more particles for bigger burst
            const particleCount = 20;
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'firework-particle';

                // Pick random color from the set
                const color = colorSet[Math.floor(Math.random() * colorSet.length)];
                particle.style.background = color;
                particle.style.boxShadow = `0 0 6px ${color}, 0 0 12px ${color}`;

                // Calculate burst direction with more randomness
                const angle = (360 / particleCount) * i + (Math.random() - 0.5) * 20;
                const distance = 80 + Math.random() * 60; // Bigger burst radius
                const tx = Math.cos(angle * Math.PI / 180) * distance;
                const ty = Math.sin(angle * Math.PI / 180) * distance;

                particle.style.setProperty('--tx', tx + 'px');
                particle.style.setProperty('--ty', ty + 'px');
                particle.style.animationDelay = Math.random() * 0.15 + 's';

                firework.appendChild(particle);
            }

            container.appendChild(firework);

            // Remove after animation
            setTimeout(() => firework.remove(), 2000);
        }

        function shareJoy() {
            if (navigator.share) {
                navigator.share({
                    title: 'Happy Birthday Gulshan!',
                    text: 'Check out this birthday surprise!',
                    url: window.location.href
                });
            } else {
                alert('Link copied ‚Äî spread the chaos');
                navigator.clipboard.writeText(window.location.href);
            }
        }

    </script>
</body>

</html>